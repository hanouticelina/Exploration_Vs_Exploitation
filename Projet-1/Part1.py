import random as rd
import numpy as np
epsilon = 0.1
# 
def jouer(machine, action):
    p = rd.uniform(0,1)
    if p <= machine[action] :
        return 1
    return 0

def algoAlea(gains,nb):
    return rd.randint(0,len(gains)-1)

def algoGreedy(gains, nb):
    return np.argmax(gains)

def algoEpsGreedy(gains, nb):
    if rd.random() < epsilon:
        return algoAlea(gains, nb)
    return algoGreedy(gains, nb)

def run(algorithm, machine, N):
    L = len(machine)
    counts = [0] * L
    listGains = [0] * L 
    gain = 0
    for i in range(N):
        levier = algorithm(listGains, counts)
        gain = jouer(machine, levier)
        counts[levier] += 1
        listGains[levier] = (listGains[levier]*counts[levier] + gain)/(counts[levier]+1)
